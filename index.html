<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Hani Home | Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * { box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
    body { margin: 0; background: #f1f5f9; direction: rtl; }
    header { background: #0f172a; color: white; padding: 20px; text-align: center; }
    .container { max-width: 600px; margin: auto; padding: 15px; }
    .nav-btn { display: block; background: #16a34a; color: white; text-align: center; padding: 12px; border-radius: 10px; text-decoration: none; font-weight: bold; margin-bottom: 10px; }
    .clear-btn { width: 100%; background: #64748b; color: white; border: none; padding: 10px; border-radius: 10px; margin-bottom: 20px; cursor: pointer; font-weight: bold; }
    .search-box { background: white; padding: 15px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); margin-bottom: 20px; }
    .search-box input, .search-box select { width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 8px; }
    .search-box button { width: 100%; padding: 10px; background: #2563eb; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; }
    .card { background: white; border-radius: 12px; overflow: hidden; margin-bottom: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
    .card img { width: 100%; height: 200px; object-fit: cover; }
    .card-info { padding: 15px; }
    .price { color: #16a34a; font-weight: bold; font-size: 1.2rem; display: block; margin: 10px 0; }
    .btns { display: flex; gap: 8px; }
    .btn-wa { flex: 2; background: #25d366; color: white; text-align: center; padding: 10px; border-radius: 8px; text-decoration: none; font-weight: bold; }
    .btn-del { flex: 1; background: #fee2e2; color: #ef4444; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; }
  </style>
</head>
<body>
  <header><h1>Hani Home</h1></header>
  <div class="container">
    <a href="add-property.html" class="nav-btn">+ Ø£Ø¶Ù Ø¹Ù‚Ø§Ø± Ø¬Ø¯ÙŠØ¯</a>
    <button onclick="clearStorage()" class="clear-btn">âš ï¸ ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø°Ø§ÙƒØ±Ø© (Ø­Ù„ Ù…Ø´ÙƒÙ„ Ø§Ù„Ø­ÙØ¸)</button>
    <div class="search-box">
      <input type="text" id="cityInp" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©...">
      <select id="typeInp">
        <option value="Ø§Ù„ÙƒÙ„">ÙƒÙ„ Ø§Ù„Ø£Ù†ÙˆØ§Ø¹</option>
        <option value="Ø¨ÙŠØ¹">Ø¨ÙŠØ¹</option>
        <option value="ÙƒØ±Ø§Ø¡">ÙƒØ±Ø§Ø¡</option>
      </select>
      <button onclick="doSearch()">Ø¨Ø­Ø«</button>
    </div>
    <div id="list"></div>
  </div>

  <script>
    function showData() {
      const list = document.getElementById('list');
      const data = JSON.parse(localStorage.getItem('hani_properties')) || [];
      list.innerHTML = data.length ? "" : "<p style='text-align:center'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù‚Ø§Ø±Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹.</p>";
      data.forEach((item, i) => {
        list.innerHTML += `
          <div class="card" data-city="${item.city}" data-type="${item.type}">
            <img src="${item.img}">
            <div class="card-info">
              <strong>${item.title}</strong>
              <div style="font-size:14px; color:gray">ğŸ“ ${item.city} | ${item.type}</div>
              <span class="price">${item.price}</span>
              <div class="btns">
                <a href="https://wa.me/${item.phone}?text=Ù…Ù‡ØªÙ… Ø¨Ù€ ${item.title}" class="btn-wa">ÙˆØ§ØªØ³Ø§Ø¨</a>
                <button onclick="remove(${i})" class="btn-del">Ø­Ø°Ù</button>
              </div>
            </div>
          </div>`;
      });
    }
    function doSearch() {
      const city = document.getElementById('cityInp').value.toLowerCase();
      const type = document.getElementById('typeInp').value;
      document.querySelectorAll('.card').forEach(card => {
        const cCity = card.getAttribute('data-city').toLowerCase();
        const cType = card.getAttribute('data-type');
        card.style.display = (cCity.includes(city) && (type === "Ø§Ù„ÙƒÙ„" || cType === type)) ? "block" : "none";
      });
    }
    function remove(i) {
      if(confirm("ØªÙ…Ø³Ø­ Ø§Ù„Ø¹Ù‚Ø§Ø±ØŸ")) {
        let d = JSON.parse(localStorage.getItem('hani_properties'));
        d.splice(i, 1);
        localStorage.setItem('hani_properties', JSON.stringify(d));
        showData();
      }
    }
    function clearStorage() {
      if(confirm("Ø³ÙŠØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„ØªÙØ±ÙŠØº Ø§Ù„Ù…Ø³Ø§Ø­Ø©. Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ")) {
        localStorage.removeItem('hani_properties');
        location.reload();
      }
    }
    window.onload = showData;
  </script>
</body>
</html>
